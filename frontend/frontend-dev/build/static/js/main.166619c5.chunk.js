(this["webpackJsonpfrontend-dev"]=this["webpackJsonpfrontend-dev"]||[]).push([[0],{128:function(e,t,n){e.exports={separator:"Separator_separator__e39e6"}},130:function(e){e.exports=JSON.parse('{"Username":"Username","Password":"Password","Type username":"Enter the username","username is a required field":"Required","password is a required field":"Required","Invalid password reset link":"Invalid password reset link. Request a new link to reset your password.","Invalid credentials":"Wrong username or password","not-admin":"You don\'t have permission to access this page. Please log in with an authorized user.","submissions sent before":"{{users}} students submitted {{total}} answers before {{lastUpdate}}"}')},131:function(e){e.exports=JSON.parse('{"Username":"Usu\xe1rio","Password":"Senha","Repeat password":"Confirmar senha","Set password":"Definir senha","Reset password":"Redefinir senha","Passwords must match":"As senhas devem ser iguais","Invalid password reset link":"Link de redefini\xe7\xe3o de senha inv\xe1lido. Solicite um novo link para redefinir sua senha.","Type username":"Nome de usu\xe1rio","Student Dashboard":"Dashboard do Aluno","Instructor Dashboard":"Dashboard do Professor","Sign in":"Entrar","Sign up":"Criar conta","Ask the instructor to sign you up":"Se n\xe3o tiver recebido um e-mail com o link de cadastro, pe\xe7a para o seu professor envi\xe1-lo novamente.","username is a required field":"Campo obrigat\xf3rio","password is a required field":"Campo obrigat\xf3rio","Invalid credentials":"Usu\xe1rio ou senha inv\xe1lidos","Logout":"Sair","not-admin":"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina. Por favor, entre com um usu\xe1rio autorizado.","submissions sent before":"{{users}} alunos enviaram {{total}} respostas at\xe9 {{lastUpdate}}","Dashboard":"Acompanhamento","Exercises":"Exerc\xedcios","Topic":"Aula","Content":"Conte\xfado","Results":"Resultados","Last attempt":"\xdaltima tentativa","Max points":"Pontua\xe7\xe3o","Attempts":"Tentativas","Tests passing":"Testes passando","Your solution":"Sua solu\xe7\xe3o","or":"ou"}')},137:function(e,t,n){},290:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(117),c=n.n(a),i=n(22),o=(n(137),n(14)),l=n(4),u=n(7),d=n(13),j=n.n(d),b=n(16),f=n(31),p=n.n(f),m=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.post("/api/auth/login/",{username:t,password:n}).then((function(e){return e.data.key})).then(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.get("/api/auth/user/",{headers:{Authorization:"Token ".concat(t)}}).then((function(e){return e.data})).then((function(e){return{pk:e.pk,username:e.username,email:e.email,firstName:e.first_name,lastName:e.last_name,isStaff:e.is_staff,token:t}})).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r,s){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.post("/api/auth/password/reset/confirm/",{uid:t,token:n,new_password1:r,new_password2:s}).then((function(){return!0})).catch((function(){return!1})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}(),h="devlife-user-data",x=function(e){e?localStorage.setItem(h,JSON.stringify(e)):localStorage.removeItem(h)},v=function(){var e=localStorage.getItem(h);return e?JSON.parse(e):null},g=n(1),w=Object(r.createContext)({user:null,putUser:function(){},removeUser:function(){}}),N=function(){var e=Object(r.useContext)(w);return{user:e.user,putUser:e.putUser,removeUser:e.removeUser}},y=function(e){var t=e.children,n=Object(r.useState)(v()),s=Object(l.a)(n,2),a=s[0],c=s[1],i=function(e){x(e),c(e)},o=function(){x(null),c(null)},u=Object(r.useMemo)((function(){return{user:a,putUser:i,removeUser:o}}),[a]);return Object(r.useEffect)((function(){if(!a){var e=v();e&&i(e)}}),[a]),Object(g.jsx)(w.Provider,{value:{user:u.user,putUser:u.putUser,removeUser:u.removeUser},children:t})},S=n(11),k=n(6),_=n(293),E=function(e){var t=e.className,n=e.children;return Object(g.jsx)("div",{className:"mx-4 ".concat(t),children:n})};function R(e){var t=e.data;if(!t.length)return null;var n=Object.keys(t[0]),r=t.map((function(e){return Object.values(e)}));return Object(g.jsx)("div",{className:"flex m-2",children:Object(g.jsx)("div",{className:"overflow-x-auto no-scrollbar max-w-full",children:Object(g.jsx)("div",{className:"align-middle inline-block",children:Object(g.jsx)("div",{className:"border-b border-gray-200 rounded-lg overflow-hidden border",children:Object(g.jsxs)("table",{className:"divide-y divide-gray-200",children:[Object(g.jsx)("thead",{className:"bg-gray-50",children:Object(g.jsx)("tr",{children:n.map((function(e,t){return Object(g.jsx)("th",{className:"p-3",children:e},"header__"+t)}))})}),Object(g.jsx)("tbody",{className:"bg-white divide-y divide-gray-50",children:r.map((function(e,t){return Object(g.jsx)("tr",{className:t%2?"bg-gray-100":"bg-gray-50",children:e.map((function(e,n){return Object(g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:null!==e&&void 0!==e?e:""},"cell__".concat(n).concat(t))}))},"textAnswers__"+t)}))})]})})})})})}var C=Object(r.memo)(R),I=n(63);function T(e){var t={labels:e.options,datasets:[{data:e.numSelectedOptions,backgroundColor:["#ff638433","#76f25d33","#36a2eb33","#ffce5633","#765df233","#21fcf233","#ff9f4033"],borderColor:["#ff6384","#76f25d","#36a2eb","#ffce56","#765df2","#21fcf2","#ff9f40"],borderWidth:2}]};return Object(g.jsx)("div",{className:"sm:w-2/3 md:w-1/3 lg:w-1/4",children:Object(g.jsx)(I.b,{data:t,options:{maintainAspectRatio:!0}})})}var L=Object(r.memo)(T),D=function(e){var t=e.onClick,n=e.variant,r=e.children,s=e.type,a=e.disabled,c=e.className,i={primary:a?"bg-gray-300 text-gray-500 cursor-default":"bg-primary hover:bg-primary-500 text-white",secondary:a?"bg-gray-300 text-gray-500 cursor-default":"bg-secondary hover:bg-secondary-500 text-white",hidden:a?"bg-transparent text-gray-500 cursor-default":"bg-transparent"}[n];return Object(g.jsx)("button",{className:"".concat(c," ").concat(i," font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex justify-center items-center"),onClick:t,type:s,disabled:a,children:r})};D.defaultProps={className:"",variant:"primary",type:"button"};var U=D,P=function(){var e=Object(_.a)().t,t=N(),n=t.user,r=t.removeUser;return Object(g.jsxs)(g.Fragment,{children:[!n&&Object(g.jsx)(i.b,{to:Re.LOGIN,children:e("Login")}),!!n&&Object(g.jsx)(U,{variant:"hidden",onClick:r,children:e("Logout")})]})},A=function(){var e=Object(_.a)().t,t=N().user;return Object(g.jsx)("nav",{className:"py-2 px-4",children:Object(g.jsxs)("ul",{className:"flex items-center",children:[Object(g.jsx)("li",{className:"uppercase font-bold",children:Object(g.jsx)(i.b,{to:"/",children:e("Developer Life")})}),Ge.map((function(n){var r=qe[n];if(r.permissionTest&&!r.permissionTest(t))return null;var s=r.title;return Object(g.jsx)("li",{className:"ml-4",children:Object(g.jsx)(i.b,{to:n,children:e(s)})},"nav__".concat(n))})),Object(g.jsx)("li",{className:"ml-auto",children:Object(g.jsx)(P,{})})]})})};function M(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var s=Object(l.a)(r[n],2),a=s[0],c=s[1],i=new RegExp(":".concat(a),"g");e=e.replace(i,String(c))}return e}var F=p.a.create({baseURL:"/"});F.interceptors.request.use((function(e){var t=v();return t&&(e.headers=Object(o.a)(Object(o.a)({},e.headers),{},{Authorization:"Token ".concat(t.token)})),e}));var W=function(){var e=Object(_.a)().t,t=Object(u.i)(),n=t.offering,s=t.slug,a=Object(r.useState)([]),c=Object(l.a)(a,2),o=c[0],d=c[1],j=Object(r.useMemo)((function(){return o.filter((function(e){return"string"===typeof e.student_input})).map((function(e){return{timestamp:e.submission_date,test_results:e.test_results,student_input:e.student_input}}))}),[o]),b=Object(r.useMemo)((function(){return o.filter((function(e){return!("string"===typeof e.test_results)})).map((function(e){return e.test_results}))}),[o]);Object(r.useEffect)((function(){var e=!0;return F.get(M("/api/offerings/:offering/exercises/:slug/answers/",{offering:n,slug:s})).then((function(t){e&&d(t.data||[])})),function(){e=!1}}),[]);var f=Object(r.useMemo)((function(){var e;return(null===(e=b[0])||void 0===e?void 0:e.num_choices)||0}),[b]),p=Object(r.useMemo)((function(){var e=Object(k.a)("ABCDEFGHIJKLMNOPQRSTUVWXYZ");e.length=f;var t=b.map((function(t){return e[(null===t||void 0===t?void 0:t.choice)||0]})),n={};return e.forEach((function(e){n[e]=t.filter((function(t){return t===e})).length})),[e,Object.values(n)]}),[b,f]),m=Object(l.a)(p,2),O=m[0],h=m[1];return Object(g.jsxs)(E,{children:[Object(g.jsx)(A,{}),Object(g.jsx)(i.b,{to:Re.INSTRUCTOR_HOME,className:"bg-gray-100 text-blue-500 px-4 py-2",children:Object(g.jsx)("b",{children:e("Go back")})}),Object(g.jsxs)("div",{className:"my-4 p-4 fit-content",children:[Object(g.jsxs)("p",{className:"mr-4",children:[Object(g.jsxs)("b",{children:[e("Offering"),":"]})," ",n]}),Object(g.jsxs)("p",{className:"mr-4",children:[Object(g.jsxs)("b",{children:[e("Exercise slug"),":"]})," ",s]}),Object(g.jsxs)("p",{children:[Object(g.jsxs)("b",{children:[e("Multiple choices answers"),":"]})," ",b.length]}),Object(g.jsxs)("p",{children:[Object(g.jsxs)("b",{children:[e("Text answers"),":"]})," ",j.length]})]}),!!b.length&&Object(g.jsx)(L,{options:O,numSelectedOptions:h}),!!j.length&&Object(g.jsx)(C,{data:j.map((function(t){var n;return n={},Object(S.a)(n,e("Submission time"),new Date(t.timestamp).toLocaleString()),Object(S.a)(n,e("Test results"),t.test_results),Object(S.a)(n,e("Student input"),Object(g.jsx)(U,{variant:"primary",onClick:function(){console.log(t.student_input)},children:"click me"})),n}))})]})},q=function(){var e=N().user,t=Object(u.h)();return e&&!e.isStaff?Object(g.jsx)(u.a,{to:{pathname:Re.LOGIN,search:"?next=".concat(t.pathname,"&reason=not-admin")}}):null},G=function(e){var t=e.variant,n=e.children,r=e.className,s=5===t?"h5":2===t?"h2":"h1",a=5===t?"":2===t?"text-2xl":"text-4xl",c=!r||r.indexOf("mt-")<0&&r.indexOf("my-")<0?"mt-4":"";return Object(g.jsx)(s,{className:"".concat(r||""," uppercase font-bold ").concat(a," leading-none tracking-wide ").concat(c),children:n})};G.defaultProps={variant:1};var H=G,J=function(e,t,n,s){var a=Object(r.useState)(t),c=Object(l.a)(a,2),i=c[0],o=c[1],u=Object(r.useState)(),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(r.useState)(!0),m=Object(l.a)(f,2),O=m[0],h=m[1],x=Object(r.useState)(!1),v=Object(l.a)(x,2),g=v[0],w=v[1],N=Object(r.useCallback)((function(){w(!0)}),[w]);return Object(r.useEffect)((function(){var t=!0;return s&&!g||(g&&w(!1),function(){var r={};n&&(r.headers={Authorization:"Token ".concat(n)}),h(!0),b(void 0),p.a.get(e,r).then((function(e){return e.data})).then((function(e){return t&&o(e)})).catch((function(e){return t&&b(e)})).finally((function(){return t&&h(!1)}))}()),function(){t=!1}}),[e,n,s,g]),{data:i,error:j,loading:O,refresh:N}},V=function(e,t){var n=J(M("/api/offerings/:offering/exercises/",{offering:String(e)}),[],t);return{exerciseList:n.data,error:n.error,loading:n.loading,refresh:n.refresh}},z=function(e){var t=e.offering,n=e.slug,s=N().user,a=function(e,t,n,r){var s=r?"?user=".concat(r):"",a=J("".concat(M("/api/offerings/:offering/summaries/:exerciseSlug/",{offering:e,exerciseSlug:t})).concat(s),[],n);return{summaryList:a.data,error:a.error,loading:a.loading,refresh:a.refresh}}(t,n,(null===s||void 0===s?void 0:s.token)||""),c=a.summaryList,o=a.loading,u=a.refresh,d=Object(_.a)().t,j=Object(r.useState)(0),b=Object(l.a)(j,2),f=b[0],p=b[1],m=Object(r.useState)(0),O=Object(l.a)(m,2),h=O[0],x=O[1],v=Object(r.useState)(),w=Object(l.a)(v,2),y=w[0],S=w[1];Object(r.useEffect)((function(){o||(x(c.length),p(c.map((function(e){return e.answer_count})).reduce((function(e,t){return e+t}),0)),S(new Date))}),[o,c]);var k=M(Re.EXERCISE_ANSWERS,{offering:t,slug:n});return Object(g.jsxs)("div",{className:"bg-gray-100 p-4 flex flex-col",children:[Object(g.jsxs)("div",{className:"flex-grow",children:[Object(g.jsxs)("p",{children:[" ",n," "]}),!!y&&Object(g.jsx)("p",{children:d("submissions sent before",{total:f,users:h,lastUpdate:null===y||void 0===y?void 0:y.toLocaleString()})})]}),Object(g.jsxs)("div",{className:"flex flex-row mt-4 justify-around",children:[Object(g.jsx)(i.b,{to:k,children:Object(g.jsx)(U,{children:d("See details")})}),Object(g.jsx)(U,{onClick:u,children:d("Reload")})]})]})},X=function(){var e=Object(_.a)().t,t=N().user,n=(null===t||void 0===t?void 0:t.token)||"",r=V(1,n).exerciseList;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(q,{}),Object(g.jsx)(A,{}),Object(g.jsxs)(E,{children:[Object(g.jsx)(H,{children:e("Instructor Dashboard")}),Object(g.jsx)("div",{className:"grid gap-1 grid-cols-3 mt-4",children:r.map((function(e){return Object(g.jsx)(z,{offering:1,slug:e.slug},"exercise-".concat(e.slug))}))})]})]})},B=function(){return new URLSearchParams(Object(u.h)().search)},Y=n(32),K=n(26),Q=n(64),Z=function(e){var t=e.htmlFor,n=e.children;return Object(g.jsx)("label",{htmlFor:t,className:"block text-gray-700 text-sm font-bold mb-1",children:n})},$=function(e){var t=e.children;return Object(g.jsx)("p",{className:"text-red-500 text-xs italic",children:t})},ee=["error","label","placeholder","inputId","name","type"],te=Object(r.forwardRef)((function(e,t){var n=e.error,r=e.label,s=e.placeholder,a=e.inputId,c=e.name,i=e.type,l=Object(Y.a)(e,ee);return Object(g.jsxs)("div",{className:"mb-4",children:[r&&Object(g.jsx)(Z,{htmlFor:a,children:r}),Object(g.jsx)("input",Object(o.a)({className:"appearance-none border ".concat(n?"border-red-500":"border-gray-300"," rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),id:a,type:i,name:c,ref:t,placeholder:s||""},l)),n&&Object(g.jsx)($,{children:n})]})}));te.defaultProps={type:"text"};var ne=te,re=function(e){return Object(g.jsx)("form",Object(o.a)({},e))};re.Label=Z,re.TextInput=ne;var se=re,ae=n(33),ce=ae.a().shape({username:ae.b().required(),password:ae.b().required()}),ie=n(292),oe=n(42),le=n.n(oe),ue={initial:{transition:{staggerChildren:.2}},animate:{transition:{staggerChildren:.2}}},de={initial:{y:"0%"},animate:{y:"100%"}},je={duration:.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut"},be=function(e){var t=e.light,n=e.className,r="".concat(le.a.loadingDot," ").concat(t?le.a.light:le.a.dark);return Object(g.jsx)("div",{className:"".concat(n||""," ").concat(le.a.animationContainer),children:Object(g.jsxs)(ie.a.div,{className:le.a.dotContainer,variants:ue,initial:"initial",animate:"animate",children:[Object(g.jsx)(ie.a.span,{className:r,variants:de,transition:je}),Object(g.jsx)(ie.a.span,{className:r,variants:de,transition:je}),Object(g.jsx)(ie.a.span,{className:r,variants:de,transition:je})]})})},fe=n(128),pe=n.n(fe),me=function(e){var t=e.children;return Object(g.jsx)("div",{className:"uppercase ".concat(pe.a.separator),children:Object(g.jsx)("span",{children:t||""})})},Oe=["onChange"],he=["onChange"],xe=function(){var e,t,n=Object(r.useRef)(!0);Object(r.useEffect)((function(){return function(){n.current=!1}}),[]);var s=B().get("reason"),a=Object(r.useState)(!1),c=Object(l.a)(a,2),i=c[0],u=c[1],d=Object(r.useState)(!1),j=Object(l.a)(d,2),b=j[0],f=j[1],p=Object(_.a)().t,O=N().putUser,h=Object(K.d)({resolver:Object(Q.a)(ce)}),x=h.register,v=h.handleSubmit,w=h.formState.errors,y=x("username"),S=y.onChange,k=Object(Y.a)(y,Oe),E=x("password"),R=E.onChange,C=Object(Y.a)(E,he);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(se,{onSubmit:v((function(e){f(!0),m(e.username,e.password).then((function(e){n.current&&(e?O(e):u(!0))})).finally((function(){return n.current&&f(!1)}))})),children:[Object(g.jsx)(se.TextInput,Object(o.a)(Object(o.a)({label:p("Username"),inputId:"username",placeholder:p("Type username")},k),{},{onChange:function(e){u(!1),S(e)},error:p((null===w||void 0===w||null===(e=w.username)||void 0===e?void 0:e.message)||"")})),Object(g.jsx)(se.TextInput,Object(o.a)(Object(o.a)({label:p("Password"),inputId:"password",type:"password",placeholder:p("Password")},C),{},{onChange:function(e){u(!1),R(e)},error:p((null===w||void 0===w||null===(t=w.password)||void 0===t?void 0:t.message)||"")})),i&&Object(g.jsx)($,{children:p("Invalid credentials")}),!!s&&Object(g.jsx)($,{children:p(s||"")}),Object(g.jsx)(U,{variant:"secondary",className:"mt-2 w-full",type:"submit",disabled:b,children:p("Sign in")}),b&&Object(g.jsx)("div",{className:"w-full flex justify-center",children:Object(g.jsx)(be,{className:"text-xs"})})]}),Object(g.jsx)(me,{children:p("or")}),Object(g.jsx)("p",{children:p("Ask the instructor to sign you up")})]})},ve=function(e){var t=e.children,n=Object(_.a)().t;return Object(g.jsxs)("div",{className:"w-full min-h-screen px-2 flex flex-col lg:flex-row justify-center lg:justify-around items-center bg-gray-100",children:[Object(g.jsxs)("div",{className:"hidden md:block mb-8 lg:pr-24",children:[Object(g.jsx)("h1",{className:"text-8xl text-primary mb-4",children:"Developer Life"}),Object(g.jsx)("img",{src:"/static/static/img/insper.png",className:"h-16",alt:"Insper Logo"})]}),Object(g.jsxs)("div",{className:"max-w-xs rounded shadow",children:[Object(g.jsx)("h2",{className:"text-3xl uppercase px-6 py-4 bg-primary text-white rounded-t text-center md:hidden",children:n("Developer Life")}),Object(g.jsx)("div",{className:"bg-white px-4 py-4 md:px-6 md:py-6 rounded",children:t})]})]})},ge=function(){var e=N(),t=e.user,n=e.removeUser,s=Object(u.g)(),a=B(),c=a.get("redirectTo"),i=Object(r.useMemo)((function(){return c&&decodeURIComponent(c)}),[c]);return Object(r.useEffect)((function(){if(t)if(a.get("reason"))n();else if(i){var e=i;e+="".concat(e.indexOf("?")>=0?"&":"?","token=").concat(t.token),window.location.href=e}else s.replace(a.get("next")||"/")}),[s,a,t,n,i]),Object(g.jsx)(ve,{children:Object(g.jsx)(xe,{})})},we=ae.a().shape({password:ae.b().required(),passwordConfirmation:ae.b().test("passwords-match","Passwords must match",(function(e){return this.parent.password===e}))}),Ne=["onChange"],ye=["onChange"],Se=function(e){var t,n,s=e.firstTime,a=e.uid,c=e.token,i=e.reason,d=Object(u.g)(),j=Object(r.useRef)(!0);Object(r.useEffect)((function(){return function(){j.current=!1}}),[]);var b=Object(r.useState)(!1),f=Object(l.a)(b,2),p=f[0],m=f[1],h=Object(_.a)().t,x=Object(K.d)({resolver:Object(Q.a)(we)}),v=x.register,w=x.handleSubmit,N=x.formState.errors,y=Object(r.useState)(!1),S=Object(l.a)(y,2),k=S[0],E=S[1],R=v("password"),C=R.onChange,I=Object(Y.a)(R,Ne),T=v("passwordConfirmation"),L=T.onChange,D=Object(Y.a)(T,ye);return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(se,{onSubmit:w((function(e){m(!0),O(a||"",c||"",e.password,e.passwordConfirmation).then((function(e){e?d.push("/"):E(!0)})).finally((function(){return j.current&&m(!1)}))})),children:[Object(g.jsx)(se.TextInput,Object(o.a)(Object(o.a)({label:h("Password"),inputId:"password",type:"password",placeholder:h("Password")},I),{},{onChange:C,error:h((null===N||void 0===N||null===(t=N.password)||void 0===t?void 0:t.message)||"")})),Object(g.jsx)(se.TextInput,Object(o.a)(Object(o.a)({label:h("Repeat password"),inputId:"passwordConfirmation",type:"password",placeholder:h("Password")},D),{},{onChange:L,error:h((null===N||void 0===N||null===(n=N.passwordConfirmation)||void 0===n?void 0:n.message)||"")})),!!i&&Object(g.jsx)($,{children:h(i||"")}),k&&Object(g.jsx)($,{children:h("Invalid password reset link")}),Object(g.jsx)(U,{variant:"secondary",className:"mt-2 w-full",type:"submit",disabled:p,children:h(s?"Set password":"Reset password")}),p&&Object(g.jsx)("div",{className:"w-full flex justify-center",children:Object(g.jsx)(be,{className:"text-xs"})})]})})},ke=function(){var e,t=B(),n=t.get("first"),r=Object(u.h)(),s=null===(e=Object(u.f)(r.pathname,qe[Re.PASSWORD_RESET].props))||void 0===e?void 0:e.params;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(ve,{children:Object(g.jsx)(Se,{firstTime:!!n,uid:null===s||void 0===s?void 0:s.uid,token:null===s||void 0===s?void 0:s.token,reason:t.get("reason")})})})},_e=function(e){var t=e.children,n=e.className;return Object(g.jsx)("h2",{className:"".concat(n||""," text-2xl text-primary leading-none mt-1"),children:t})},Ee=function(e){var t=e.className,n=e.progress,r=180*Math.PI;n<0&&(n=0),n>1&&(n=1);var s=110*Math.sqrt(2),a={start:{strokeDashoffset:r},progress:{strokeDashoffset:r*(1-n),transition:{duration:.5}}},c={start:{strokeDashoffset:s},progress:{strokeDashoffset:0,transition:{duration:.5,delay:.2}}};return Object(g.jsxs)("svg",{className:t||"",id:"svg",width:"200",height:"200",viewBox:"0 0 200 200",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(g.jsx)("circle",{r:"90",cx:"100",cy:"100",fill:"transparent",stroke:"#cad8ca",strokeWidth:"20"}),Object(g.jsx)(ie.a.circle,{r:"90",cx:"100",cy:"100",fill:"transparent",stroke:"#27A5A2",transform:"rotate(-90 100 100)",strokeWidth:"20",strokeDasharray:"".concat(r),strokeDashoffset:"".concat(r*(1-n)),variants:a,initial:"start",animate:"progress"}),1===n&&Object(g.jsx)(ie.a.path,{d:"M45 95L85 135L155 65",fill:"transparent",stroke:"#27A5A2",strokeWidth:"20",strokeDasharray:"".concat(s),strokeDashoffset:"0",variants:c,initial:"start",animate:"progress"})]})};Ee.defaultProps={progress:1};var Re,Ce=Ee,Ie=function(e){var t=e.options,n=e.onSelect,r=e.title,s=e.completionRates,a=e.selectedRow;return Object(g.jsxs)("div",{className:"border border-gray-200 py-2 overflow-hidden",children:[Object(g.jsx)(H,{variant:5,className:"px-4 mt-2",children:r}),Object(g.jsx)("ul",{className:"mt-4",children:t.map((function(e,r){return Object(g.jsxs)("li",{onClick:function(){return function(e){n&&n(t[e],e)}(r)},className:"flex items-center cursor-pointer px-4 py-1 ".concat(r===a?"bg-primary-50":""),children:[Object(g.jsx)("div",{className:"min-w-min mr-2",children:Object(g.jsx)(Ce,{className:"w-6 h-6",progress:s[e]})}),e]},"option-".concat(e,"-").concat(r))}))})]})},Te=function(e){var t,n,r=e.offering,s=e.summaryMap,a=e.exercise,c=Object(_.a)().t,i=N().user,o=s[null===a||void 0===a?void 0:a.pk],l=function(e,t,n,r){var s=J(M("/api/offerings/:offering/exercises/:exerciseSlug/answers/:answerId/",{offering:e,exerciseSlug:n,answerId:r}),null,t,!(n&&t&&void 0!==r&&void 0!==e));return{answer:s.data,error:s.error,loading:s.loading,refresh:s.refresh}}(r,(null===i||void 0===i?void 0:i.token)||"",null===a||void 0===a?void 0:a.slug,null===o||void 0===o?void 0:o.latest).answer;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(H,{variant:5,className:"px-4 mt-2",children:(null===a||void 0===a?void 0:a.slug)||""}),Object(g.jsxs)("div",{className:"px-4 mt-4",children:[Object(g.jsx)(U,{className:"uppercase tracking-wide",children:"Ver Exerc\xedcio"}),Object(g.jsxs)("section",{className:"mt-6",children:[Object(g.jsx)(H,{variant:5,children:c("Results")}),Object(g.jsxs)("div",{className:"flex flex-wrap mt-2",children:[Object(g.jsxs)("span",{className:"mr-8",children:[c("Max points"),":"," ",Object(g.jsxs)("strong",{className:"font-bold text-primary-500",children:[Math.round(1e4*((null===o||void 0===o?void 0:o.max_points)||0))/100,"%"]})]}),Object(g.jsxs)("span",{className:"mr-8",children:[c("Attempts"),":"," ",Object(g.jsx)("strong",{className:"font-bold",children:(null===o||void 0===o?void 0:o.answer_count)||0})]})]})]}),"CODE"===a.type&&Object(g.jsxs)("section",{className:"mt-6",children:[Object(g.jsx)("h6",{className:"font-bold",children:c("Last attempt")}),Object(g.jsx)("div",{className:"flex flex-wrap mt-2",children:Object(g.jsxs)("span",{className:"mr-8",children:[c("Tests passing"),":"," ",Object(g.jsx)("strong",{className:"font-bold",children:l&&l.test_results?null===(t=l.test_results)||void 0===t?void 0:t.passed:"0"})]})}),(null===l||void 0===l||null===(n=l.student_input)||void 0===n?void 0:n.code)&&Object(g.jsxs)("div",{className:"mt-4",children:[Object(g.jsxs)("strong",{className:"font-bold",children:[c("Your solution"),":"]}),Object(g.jsx)("pre",{className:"mt-2 bg-black text-white py-4 px-4",children:l.student_input.code})]})]})]})]})},Le=function(e){var t=e.group,n=e.completionRates,r=Object.keys(t)[0];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(H,{variant:5,className:"px-4 mt-2",children:r}),Object(g.jsx)("div",{className:"px-4 mt-4",children:Object(g.jsx)(Ce,{progress:n[r]||0})})]})},De=function(e){var t=e.topic,n=e.completionRates,r=Object.keys(t)[0];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(H,{variant:5,className:"px-4 mt-2",children:r}),Object(g.jsx)("div",{className:"px-4 mt-4",children:Object(g.jsx)(Ce,{progress:n[r]||0})})]})},Ue=function(e,t,n,r){var s,a;if(!e)return null;if(e.slug)return Object(g.jsx)(Te,{offering:t,summaryMap:n,exercise:e});var c=Object.keys(e);if(c&&(null===(s=e[c[0]])||void 0===s?void 0:s.length))return Object(g.jsx)(Le,{group:e,completionRates:r});var i=Object.keys(e[c[0]]);return c&&i&&(null===(a=e[c[0]][i[0]])||void 0===a?void 0:a.length)?Object(g.jsx)(De,{topic:e,completionRates:r}):null},Pe=function(e){var t=e.data,n=e.offering,r=e.summaryMap,s=e.completionRates;return Object(g.jsx)(g.Fragment,{children:Ue(t,n,r,s)})},Ae=function(e,t){return Object.fromEntries(e.map((function(e){var n=t[e.pk];return[e.slug,n?n.max_points:0]})))},Me=function(e,t){return Object.fromEntries(Object.keys(e).map((function(n){var r=Object.values(Ae(e[n],t));return[n,r.reduce((function(e,t){return e+t}),0)/r.length]})))},Fe=function(e){var t=e.exerciseGroups,n=e.summaryMap,s=e.className,a=Object(_.a)().t,c=Object(r.useState)(""),i=Object(l.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(""),j=Object(l.a)(d,2),b=j[0],f=j[1],p=Object(r.useState)({}),m=Object(l.a)(p,2),O=m[0],h=m[1];Object(r.useEffect)((function(){h(function(e,t){return Object.assign.apply(Object,[{}].concat(Object(k.a)(Object.keys(e).map((function(n){var r=e[n],s=Object.keys(r).map((function(e){return r[e]})).reduce((function(e,t){return e||t?e?t?e.concat(t):e:t:[]}),[]);return Me(Object(S.a)({},n,s),t)})))))}(t,n))}),[t,n]);var x=Object(r.useState)({}),v=Object(l.a)(x,2),w=v[0],N=v[1],y=Object(r.useState)({}),E=Object(l.a)(y,2),R=E[0],C=E[1];Object(r.useEffect)((function(){var e=o?t[o]:{};N(e),e&&C(Me(e,n))}),[o,t,n]);var I=Object(r.useState)([]),T=Object(l.a)(I,2),L=T[0],D=T[1],U=Object(r.useState)({}),P=Object(l.a)(U,2),A=P[0],M=P[1];Object(r.useEffect)((function(){var e=w[b];D(Object.keys(w)&&b?e.map((function(e){return e.slug})):[]),e&&M(Ae(e,n))}),[w,b,n]);var F=Object(r.useState)(-1),W=Object(l.a)(F,2),q=W[0],G=W[1],H=Object(r.useState)(-1),J=Object(l.a)(H,2),V=J[0],z=J[1],X=Object(r.useState)(-1),B=Object(l.a)(X,2),Y=B[0],K=B[1],Q=Object(r.useState)(0),Z=Object(l.a)(Q,2),$=Z[0],ee=Z[1],te=Object(r.useState)(null),ne=Object(l.a)(te,2),re=ne[0],se=ne[1];return Object(g.jsxs)("div",{className:"grid grid-cols-6 shadow-sm ".concat(s||""),children:[Object(g.jsx)(Ie,{title:a("Topic"),options:Object.keys(t),onSelect:function(e,n){u(e),se(Object(S.a)({},e,t[e])),f(""),G(n),z(-1),K(-1),ee(0)},completionRates:O,selectedRow:q}),Object(g.jsx)(Ie,{title:a("Content"),options:Object.keys(w),onSelect:function(e,t){f(e),se(Object(S.a)({},e,w[e])),z(t),K(-1),ee(1)},completionRates:R,selectedRow:V}),Object(g.jsx)(Ie,{title:a("Exercises"),options:L,onSelect:function(e,t){var n=w[b][t];se(n),K(t),ee(2)},completionRates:A,selectedRow:Y}),Object(g.jsx)("div",{className:"col-start-4 col-end-7 border border-gray-200 py-2",children:Object(g.jsx)(Pe,{offering:1,data:re,summaryMap:n,completionRates:[O,R,A][$]})})]})},We=function(){var e=Object(_.a)().t,t=N().user,n=Object(r.useState)({}),s=Object(l.a)(n,2),a=s[0],c=s[1],i=(null===t||void 0===t?void 0:t.token)||"",o=V(1,i).exerciseList;Object(r.useEffect)((function(){c(function(e){var t={};return e.forEach((function(e){var n=e.topic,r=e.group;t[n]||(t[n]={}),t[n][r]||(t[n][r]=[]),t[n][r].push(e)})),t}(o))}),[o]);var u=function(e,t,n){var r=n?"?user=".concat(n):"",s=J("".concat(M("/api/offerings/:offering/summaries/",{offering:e})).concat(r),[],t);return{summaryList:s.data,error:s.error,loading:s.loading,refresh:s.refresh}}(1,i,null===t||void 0===t?void 0:t.pk),d=u.summaryList,j=u.loading,b=Object(r.useState)({}),f=Object(l.a)(b,2),p=f[0],m=f[1];return Object(r.useEffect)((function(){j||m(function(e){return Object.fromEntries(e.map((function(e){return[e.exercise,e]})))}(d))}),[d,j]),t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(A,{}),Object(g.jsxs)(E,{children:[Object(g.jsx)(H,{children:e("Dashboard")}),Object(g.jsx)(_e,{children:"".concat(t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName)}),Object(g.jsxs)("section",{className:"my-8",children:[Object(g.jsx)(H,{variant:2,children:e("Exercises")}),Object(g.jsx)(Fe,{exerciseGroups:a,summaryMap:p,className:"mt-4"})]})]})]}):null};!function(e){e.STUDENT_HOME="/",e.INSTRUCTOR_HOME="/instructor",e.EXERCISE_ANSWERS="/instructor/answers/:offering/:slug/",e.LOGIN="/login",e.PASSWORD_RESET="/password-reset/:uid/:token/"}(Re||(Re={}));var qe={};qe[Re.STUDENT_HOME]={title:"Student Dashboard",props:{path:Re.STUDENT_HOME,exact:!0,component:We}},qe[Re.INSTRUCTOR_HOME]={title:"Instructor Dashboard",permissionTest:function(e){return!!(null===e||void 0===e?void 0:e.isStaff)},props:{path:Re.INSTRUCTOR_HOME,exact:!0,component:X}},qe[Re.EXERCISE_ANSWERS]={title:"Exercise Answers",permissionTest:function(e){return!!(null===e||void 0===e?void 0:e.isStaff)},props:{path:Re.EXERCISE_ANSWERS,exact:!0,component:W}},qe[Re.LOGIN]={title:"Login",props:{path:Re.LOGIN,exact:!0,component:ge}},qe[Re.PASSWORD_RESET]={title:"Password reset",props:{path:Re.PASSWORD_RESET,exact:!0,component:ke}};var Ge=[Re.INSTRUCTOR_HOME],He=function(){var e=N().user,t=Object(u.h)();return e||Object(u.f)(t.pathname,qe[Re.LOGIN].props)||Object(u.f)(t.pathname,qe[Re.PASSWORD_RESET].props)?null:Object(g.jsx)(u.a,{to:{pathname:Re.LOGIN,search:"?next=".concat(t.pathname)}})},Je=function(e){var t=e.children;return Object(g.jsx)(y,{children:t})},Ve=n(83),ze=n(49),Xe=n(130),Be=n(131);Ve.a.use(ze.e).init({resources:{en:{translation:Xe},pt:{translation:Be}},lng:"pt",fallbackLng:"pt",interpolation:{escapeValue:!1}});Ve.a;var Ye=function(){return Object(g.jsx)(Je,{children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(He,{}),Object(g.jsx)("div",{children:Object(g.jsx)(u.d,{children:Object.entries(qe).map((function(e,t){var n=Object(l.a)(e,2),r=(n[0],n[1].props);return Object(g.jsx)(u.b,Object(o.a)({},r),"route__".concat(t))}))})})]})})},Ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,294)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};c.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(i.a,{children:Object(g.jsx)(Ye,{})})}),document.getElementById("root")),Ke()},42:function(e,t,n){e.exports={animationContainer:"LoadingIndicator_animationContainer__31NJQ",loadingDot:"LoadingIndicator_loadingDot__9elUF",dark:"LoadingIndicator_dark__VNh81",light:"LoadingIndicator_light__1lhVC",dotContainer:"LoadingIndicator_dotContainer__3C8Kq"}}},[[290,1,2]]]);
//# sourceMappingURL=main.166619c5.chunk.js.map